# 性能测试用例配置
# test_perf_sanity.py 已经处理所有逻辑，这里只列出要运行的测试用例

# ============================================
# 单机 Agg 测试
# ============================================
single_agg_tests:
  # 配置文件在: tests/scripts/perf-sanity/*.yaml
  - aggr_upload-k2_thinking_fp4_2_nodes_grace_blackwell.yaml
  - aggr_upload-config_database_b200_nvl.yaml-r1_fp8_dep8_mtp1_1k1k
  - aggr_upload-config_database_h200_sxm.yaml

# ============================================
# 多机 Agg 测试 (2 节点)
# ============================================
multi_agg_2nodes_tests:
  # 2 节点，8 GPUs
  - aggr_upload-k2_thinking_fp4_2_nodes_grace_blackwell.yaml
  - aggr_upload-multi_node_config.yaml

# ============================================
# 多机 Disagg 测试 (3 节点)
# ============================================
disagg_3nodes_tests:
  # 配置文件在: tests/integration/defs/perf/disagg/test_configs/disagg/perf/*.yaml
  # 3 节点，12 GPUs
  - disagg_upload-deepseek-r1-fp4_1k1k_ctx2_gen1_dep16_bs128_eplb288_mtp3_ccb-NIXL
  - disagg_upload-deepseek-r1-fp4_1k1k_ctx2_gen1_dep16_bs128_eplb288_mtp3_ccb-UCX
  - disagg_upload-deepseek-r1-fp4_8k1k_ctx2_gen1_dep32_bs128_eplb288_mtp3_ccb-DEFAULT

# ============================================
# 多机 Disagg 测试 (6 节点)
# ============================================
disagg_6nodes_tests:
  # 6 节点，24 GPUs
  - disagg_upload-deepseek-r1-fp4_8k1k_ctx6_gen1_dep16_bs64_eplb288_mtp0_ccb-NIXL
  - disagg_upload-deepseek-r1-fp4_8k1k_ctx6_gen1_dep16_bs64_eplb288_mtp0_ccb-UCX

# ============================================
# 多机 Disagg 测试 (8 节点)
# ============================================
disagg_8nodes_tests:
  # 8 节点，32 GPUs
  - disagg_upload-deepseek-r1-fp4_8k1k_ctx8_gen1_dep32_bs16_eplb288_mtp3_ccb-NIXL
  - disagg_upload-deepseek-r1-fp4_8k1k_ctx8_gen1_dep32_bs16_eplb288_mtp3_ccb-UCX

# ============================================
# WideEP 测试
# ============================================
wideep_tests:
  # 配置文件在: tests/integration/defs/perf/disagg/test_configs/wideep/perf/*.yaml
  - disagg_upload-kimi-k2-thinking-fp4_1k1k_ctx3_gen1_dep32_bs1024_eplb384_mtp0_ccb-NIXL
  - disagg_upload-kimi-k2-thinking-fp4_8k1k_ctx8_gen1_dep32_bs256_eplb416_mtp0_ccb-NIXL
  
# ============================================
# 执行配置
# ============================================
execution_config:
  # Docker 设置
  docker_image: "nvcr.io/nvidia/tensorrt-llm:latest"
  
  # 节点配置（示例）
  node_groups:
    gb200_2nodes: "gb200-node1,gb200-node2"
    gb200_3nodes: "gb200-node1,gb200-node2,gb200-node3"
    gb200_6nodes: "gb200-node1,gb200-node2,gb200-node3,gb200-node4,gb200-node5,gb200-node6"
    gb200_8nodes: "gb200-node1,gb200-node2,gb200-node3,gb200-node4,gb200-node5,gb200-node6,gb200-node7,gb200-node8"
  
  # 超时设置（秒）
  timeout:
    single_agg: 3600      # 1 hour
    multi_agg: 7200       # 2 hours
    disagg: 10800         # 3 hours
  
  # 输出目录
  output_dir: "/tmp/perf_test_output"
